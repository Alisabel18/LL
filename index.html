<!DOCTYPE html>
<html>
<head>
  <title>Admin Login - Participant Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #e6f7f9;
      margin: 0;
      padding: 0;
    }
    #loginPage {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(to bottom right, #b2f7ef, #86c5f4);
      color: #333;
    }
    #loginPage h2 {
      font-size: 28px;
      margin-bottom: 20px;
    }
    #loginPage input {
      padding: 10px;
      margin: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 250px;
      font-size: 16px;
    }
    #loginPage button {
      background-color: #2d89ef;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    #loginPage button:hover {
      background-color: #1c6cd9;
    }
    #menuIcon {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
    }
    #menuDropdown {
      display: none;
      position: absolute;
      top: 50px;
      right: 20px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    #menuDropdown button {
      display: block;
      width: 100%;
      border: none;
      background: none;
      padding: 10px;
      text-align: left;
      cursor: pointer;
    }
    #menuDropdown button:hover {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>

<!-- Menu Icon -->
<div id="menuIcon" onclick="toggleMenu()">â˜°</div>
<div id="menuDropdown">
  <button onclick="changePassword()">Change Password</button>
  <button onclick="logout()">Log Out</button>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage">
  <h2>Welcome Admin</h2>
  <input type="text" id="loginUser" placeholder="Username">
  <input type="password" id="loginPass" placeholder="Password">
  <button onclick="checkLogin()">Login</button>
</div>

<!-- MAIN CONTENT -->
<div id="mainContent" style="display:none; padding: 20px;">
  <h2>Participant Dashboard</h2>
  <button onclick="showForm()">+ Add Participant</button>
  <div id="participantForm" style="display:none;">
    <!-- Your participant input form will go here -->
  </div>
  <div id="dashboardSection"></div>
</div>

<!-- DELETE PASSWORD MODAL -->
<div id="passwordModal" style="display:none;">
  <h3>Enter Admin Password to Delete</h3>
  <input type="password" id="deletePassword">
  <button onclick="confirmPassword()">Confirm</button>
  <button onclick="closePasswordModal()">Cancel</button>
</div>

<script>
  let participants = [];
  let deletePendingId = null;
  let updateHistory = {};
  let currentPassword = "admin123";

  function toggleMenu() {
    const menu = document.getElementById("menuDropdown");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
  }

  function logout() {
    document.getElementById("mainContent").style.display = "none";
    document.getElementById("loginPage").style.display = "flex";
  }

  function changePassword() {
    const oldPass = prompt("Enter current password:");
    if (oldPass !== currentPassword) {
      alert("Incorrect password.");
      return;
    }
    const newPass = prompt("Enter new password:");
    if (newPass) {
      currentPassword = newPass;
      alert("Password updated successfully.");
    }
  }

  function checkLogin() {
    const username = document.getElementById("loginUser").value;
    const password = document.getElementById("loginPass").value;
    if (username === "isabeeel" && password === currentPassword) {
      document.getElementById("loginPage").style.display = "none";
      document.getElementById("mainContent").style.display = "block";
    } else {
      alert("Incorrect credentials.");
    }
  }

  function showForm() {
    document.getElementById("participantForm").style.display = "block";
  }

  function closePasswordModal() {
    deletePendingId = null;
    document.getElementById("passwordModal").style.display = "none";
  }

  function confirmPassword() {
    const inputPass = document.getElementById("deletePassword").value;
    if (inputPass === currentPassword) {
      if (confirm("Are you sure you want to delete this participant?")) {
        participants = participants.filter(p => p.id !== deletePendingId);
        document.getElementById("dashboardSection").innerHTML = "";
        closePasswordModal();
        alert("Participant deleted.");
      }
    } else {
      alert("Incorrect admin password.");
    }
  }
</script>
</body>
</html>
